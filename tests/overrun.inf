!% -~S
!% $OMIT_UNUSED_ROUTINES=1
!% $ZCODE_LESS_DICT_DATA=1

Constant Story      "Minimal";
Constant Headline   "^A sample game which uses PunyInform.^";

Constant STATUSLINE_SCORE; Statusline score;

Constant NO_SCORE = 0;

! Uncomment to add optional features to PunyInform
Constant DEBUG;
Constant OPTIONAL_NO_DARKNESS;
Constant OPTIONAL_EXTENDED_METAVERBS;
!Constant OPTIONAL_EXTENDED_VERBSET;
!Constant OPTIONAL_FLEXIBLE_INVENTORY;
!Constant OPTIONAL_PROVIDE_UNDO;
!Constant RUNTIME_ERRORS = 0; ! 0, 1 or 2. 0 = smallest file, 2 = most info
!Constant DEBUG_PARSENOUNPHRASE;

Constant INITIAL_LOCATION_VALUE = Library;
Constant MAX_WHICH_OBJECTS 5;
Constant MAX_MULTIPLE_OBJECTS 7;

Include "globals.h";

Include "puny.h";

Class Coin
	with
		short_name "coin",
		name 'coin' 'coins//p';

Object Library "The Library"
	with
		description "You are in a library.";

Object -> Box "box"
	with
		name 'box',
		inside_description "It feels so nice, standing in the box.",
		each_turn [;
			CheckArray(dummy1);
			CheckArray(dummy2);
			CheckArray(dummy3);
		],
	has container open openable enterable;

! Defining 12 coins, much more than what the arrays which_object and multiple_objects can handle

Coin -> with name 'red' 'coin' 'coins//p', short_name "red coin";
Coin -> with name 'green' 'coin' 'coins//p', short_name "green coin";
Coin -> ;
Coin -> ;
Coin -> ;
Coin -> ;
Coin -> ;
Coin -> ;
Coin -> ;
Coin -> ;
Coin -> ;
Coin -> c2 "blue coin" with name 'blue' 'coin' 'coins//p', short_name "blue coin";

[ CheckArray k i;
	for(i=0:i<5:i++)
		if(k-->i ~= 77)
			print "ERROR: ",k,"-->",i,"=",k-->i,"^";
	print "Done ",k,"^";
];

[Initialise;
	print "^^And so the story begins...^^";
];
